<div class="container-fluid">
  <div class="row">
    <div class="col-md-6">
      <div class="panel panel-default">
        <div class="panel-body">
          <p style="display: inline-block" ng-repeat="id in root.folders">
            <a ui-sref="picbrowser({id: id, sz: sz})" class="btn"
               ng-class="id === firstlevel.id ? 'btn-primary btn-purple' : 'btn-default'">{{id}}</a> &nbsp;
          </p>
          <p ng-repeat="folder in path">
            <a ui-sref="picbrowser({id: $last ? folder.parent : folder.id, sz: sz})"
               ng-class="$last ? 'cur-folder' : 'higher-folder'">{{folder.name}}</a>
          </p>
          <p ng-if="cur !== root" ng-repeat="id in cur.folders">
            <a ui-sref="picbrowser({id: id, sz: sz})"
               class="lower-folder">{{cur.names[id]}}</a>
          </p>
        </div>
      </div>
      <div class="panel-footer-drippy">
        <a ui-sref="picbrowser({id: cur.parent, sz: sz})" class="btn btn-default" ng-show="cur !== root">
          <span class="glyphicon glyphicon-arrow-up groovy-logo-color"></span> Back</a> &nbsp;
        <a ui-sref="picbrowser({id: nextId, sz: sz})" class="btn btn-default" ng-show="nextId">
          <span class="glyphicon glyphicon-arrow-right groovy-logo-color"></span> Next</a>
        <button class="btn btn-default pull-right" ng-show="cur.pictures.length" ng-click="toggleTileSz()">
          {{tileSzBtnText}}</button>
      </div>
    </div>
  </div>
  <div class="row" ng-repeat="id in cur.videos" ng-show="$first || showVideo">
    <div class="col-md-6">
      <div class="panel panel-default">
        <div class="panel-heading" ng-if="$first" ng-click="toggleVideo()">
          <div class="panel-title">
            <span class="groovy-logo">{{cur.videos.length}} Video{{cur.videos.length > 1 ? "s" : ""}}</span>
            <span class="curly-font">click here to {{showVideo ? "hide" : "see"}} {{cur.videos.length > 1 ? "them" : "it"}}</span>
          </div>
        </div>
        <div class="panel-body" ng-show="showVideo">
          <video style="width:100%" controls preload="none" ng-src="{{'gvypics/vid/'+id}}"></video>
          <p>{{cur.names[id]}}</p>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="pic-tile-panel" ng-hide="showCarousel">
  <div class="pic-tile" ng-class="'pic-tile-'+sz" ng-repeat="id in cur.pictures | limitTo: nlimit">
    <div class="pic-tile-pic" ng-click="toggleCarousel(id)">
      <img ng-src="{{'gvypics/pic/'+id+'?sz='+sz}}">
    </div>
    <p class="pic-tile-text">{{cur.names[id]}}</p>
  </div>
  <div class="pic-tile" ng-class="'pic-tile-'+sz" ng-if="cur.pictures.length > nlimit">
    <button class="btn btn-primary btn-purple" ng-click="morePics()">
      {{nlimit}} of {{cur.pictures.length}}, click here for more</button>
  </div>
</div>
<div ng-show="showCarousel">
  <button class="btn btn-default" ng-click="toggleCarousel()">Close Carousel</button>
  <div uib-carousel id="carousel" style="background-color: black" active="curIndex">
    <div uib-slide ng-repeat="id in cur.pictures.slice(startIndex, endIndex)" index="$index">
      <img class="carousel-pic" ng-src="{{'gvypics/pic/'+id+'?sz=lg'}}" ng-click="toggleCarousel()">
      <div class="carousel-caption"><p>{{cur.names[id]}}</p></div>
    </div>
  </div>
</div>
